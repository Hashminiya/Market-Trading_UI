package org.vaadin.UI.view;

import com.vaadin.flow.component.button.Button;
import com.vaadin.flow.component.formlayout.FormLayout;
import com.vaadin.flow.component.notification.Notification;
import com.vaadin.flow.component.orderedlayout.HorizontalLayout;
import com.vaadin.flow.component.orderedlayout.VerticalLayout;
import com.vaadin.flow.component.textfield.EmailField;
import com.vaadin.flow.component.textfield.PasswordField;
import com.vaadin.flow.component.textfield.TextField;
import com.vaadin.flow.router.Route;
import com.vaadin.flow.theme.lumo.LumoUtility;
import org.vaadin.UI.Presenter.SignUpPresenter;
import org.vaadin.UI.view.Interface.ISignUpView;

@Route("")
public class SignUpView extends ViewTemplate implements ISignUpView {

    private SignUpPresenter presenter;
    private TextField usernameField;
    private PasswordField passwordField;
    private EmailField emailField;
    private Button signupButton;

    public SignUpView() {
        // Create form layout
        HorizontalLayout restOfPage = new HorizontalLayout();

        FormLayout formLayout = new FormLayout();
        formLayout.setWidth("400px");
        formLayout.addClassName(LumoUtility.Padding.LARGE);
        formLayout.addClassName(LumoUtility.BoxShadow.SMALL);

        // Create fields
        usernameField = new TextField("Username");
        passwordField = new PasswordField("Password");
        emailField = new EmailField("Email");

        // Add fields to form layout
        formLayout.add(usernameField, emailField, passwordField);

        // Create and style the signup button
        signupButton = new Button("Sign Up");
        signupButton.addClickListener(event -> presenter.handleSignup());
        signupButton.addClassName(LumoUtility.Margin.Top.LARGE);
        signupButton.addClassName(LumoUtility.Width.FULL);

        // Center everything
        setAlignItems(Alignment.CENTER);

        // Add components to the layout
        restOfPage.add(formLayout, signupButton);
        add(restOfPage);
    }

    @Override
    public void showNotification(String message) {
        Notification.show(message);
    }

    @Override
    public String getUsername() {
        return usernameField.getValue();
    }

    @Override
    public String getPassword() {
        return passwordField.getValue();
    }

    @Override
    public String getEmail() {
        return emailField.getValue();
    }

    @Override
    public void setPresenter(SignUpPresenter presenter) {
        this.presenter = presenter;
    }
}
